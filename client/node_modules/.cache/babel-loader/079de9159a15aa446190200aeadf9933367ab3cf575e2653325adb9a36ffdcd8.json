{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\shara\\\\Desktop\\\\ALL FILES\\\\final capstone project\\\\ML training\\\\client\\\\src\\\\components\\\\GoogleSignInButton.jsx\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useRef, useState } from 'react';\nimport { useAuth } from '../contexts/AuthContext';\nimport toast from 'react-hot-toast';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst GoogleSignInButton = ({\n  onSuccessNavigate\n}) => {\n  _s();\n  const buttonRef = useRef(null);\n  const [ready, setReady] = useState(false);\n  const {\n    googleLogin\n  } = useAuth();\n  const clientId = process.env.REACT_APP_GOOGLE_CLIENT_ID;\n  useEffect(() => {\n    // Load Google Identity Services script if not present\n    const ensureScript = () => new Promise((resolve, reject) => {\n      if (window.google && window.google.accounts && window.google.accounts.id) {\n        return resolve();\n      }\n      const script = document.createElement('script');\n      script.src = 'https://accounts.google.com/gsi/client';\n      script.async = true;\n      script.defer = true;\n      script.onload = resolve;\n      script.onerror = reject;\n      document.body.appendChild(script);\n    });\n    if (!clientId) {\n      console.error('Missing REACT_APP_GOOGLE_CLIENT_ID');\n      return;\n    }\n    ensureScript().then(() => {\n      window.google.accounts.id.initialize({\n        client_id: clientId,\n        callback: async response => {\n          try {\n            const idToken = response.credential;\n            const result = await googleLogin(idToken);\n            if (result.success) {\n              toast.success('Signed in with Google');\n              onSuccessNavigate === null || onSuccessNavigate === void 0 ? void 0 : onSuccessNavigate();\n            } else {\n              toast.error(result.message || 'Google sign-in failed');\n            }\n          } catch (err) {\n            toast.error('Google sign-in failed');\n          }\n        }\n      });\n      if (buttonRef.current) {\n        window.google.accounts.id.renderButton(buttonRef.current, {\n          theme: 'outline',\n          size: 'large',\n          shape: 'pill',\n          width: 320\n        });\n        setReady(true);\n      }\n    }).catch(() => {\n      console.error('Failed to load Google script');\n    });\n  }, [clientId, googleLogin]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      ref: buttonRef\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 7\n    }, this), !clientId && /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"text-sm text-red-600 mt-2\",\n      children: \"Google Sign-In not configured.\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 9\n    }, this), clientId && !ready && /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"text-sm text-gray-500 mt-2\",\n      children: \"Loading Google Sign-In\\u2026\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 68,\n    columnNumber: 5\n  }, this);\n};\n_s(GoogleSignInButton, \"QGNzuDry1VCWXfG49I7zhmdp4/M=\", false, function () {\n  return [useAuth];\n});\n_c = GoogleSignInButton;\nexport default GoogleSignInButton;\nvar _c;\n$RefreshReg$(_c, \"GoogleSignInButton\");","map":{"version":3,"names":["React","useEffect","useRef","useState","useAuth","toast","jsxDEV","_jsxDEV","GoogleSignInButton","onSuccessNavigate","_s","buttonRef","ready","setReady","googleLogin","clientId","process","env","REACT_APP_GOOGLE_CLIENT_ID","ensureScript","Promise","resolve","reject","window","google","accounts","id","script","document","createElement","src","async","defer","onload","onerror","body","appendChild","console","error","then","initialize","client_id","callback","response","idToken","credential","result","success","message","err","current","renderButton","theme","size","shape","width","catch","children","ref","fileName","_jsxFileName","lineNumber","columnNumber","className","_c","$RefreshReg$"],"sources":["C:/Users/shara/Desktop/ALL FILES/final capstone project/ML training/client/src/components/GoogleSignInButton.jsx"],"sourcesContent":["import React, { useEffect, useRef, useState } from 'react';\r\nimport { useAuth } from '../contexts/AuthContext';\r\nimport toast from 'react-hot-toast';\r\n\r\nconst GoogleSignInButton = ({ onSuccessNavigate }) => {\r\n  const buttonRef = useRef(null);\r\n  const [ready, setReady] = useState(false);\r\n  const { googleLogin } = useAuth();\r\n\r\n  const clientId = process.env.REACT_APP_GOOGLE_CLIENT_ID;\r\n\r\n  useEffect(() => {\r\n    // Load Google Identity Services script if not present\r\n    const ensureScript = () =>\r\n      new Promise((resolve, reject) => {\r\n        if (window.google && window.google.accounts && window.google.accounts.id) {\r\n          return resolve();\r\n        }\r\n        const script = document.createElement('script');\r\n        script.src = 'https://accounts.google.com/gsi/client';\r\n        script.async = true;\r\n        script.defer = true;\r\n        script.onload = resolve;\r\n        script.onerror = reject;\r\n        document.body.appendChild(script);\r\n      });\r\n\r\n    if (!clientId) {\r\n      console.error('Missing REACT_APP_GOOGLE_CLIENT_ID');\r\n      return;\r\n    }\r\n\r\n    ensureScript()\r\n      .then(() => {\r\n        window.google.accounts.id.initialize({\r\n          client_id: clientId,\r\n          callback: async (response) => {\r\n            try {\r\n              const idToken = response.credential;\r\n              const result = await googleLogin(idToken);\r\n              if (result.success) {\r\n                toast.success('Signed in with Google');\r\n                onSuccessNavigate?.();\r\n              } else {\r\n                toast.error(result.message || 'Google sign-in failed');\r\n              }\r\n            } catch (err) {\r\n              toast.error('Google sign-in failed');\r\n            }\r\n          },\r\n        });\r\n        if (buttonRef.current) {\r\n          window.google.accounts.id.renderButton(buttonRef.current, {\r\n            theme: 'outline',\r\n            size: 'large',\r\n            shape: 'pill',\r\n            width: 320,\r\n          });\r\n          setReady(true);\r\n        }\r\n      })\r\n      .catch(() => {\r\n        console.error('Failed to load Google script');\r\n      });\r\n  }, [clientId, googleLogin]);\r\n\r\n  return (\r\n    <div>\r\n      <div ref={buttonRef} />\r\n      {!clientId && (\r\n        <p className=\"text-sm text-red-600 mt-2\">Google Sign-In not configured.</p>\r\n      )}\r\n      {clientId && !ready && (\r\n        <p className=\"text-sm text-gray-500 mt-2\">Loading Google Sign-Inâ€¦</p>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default GoogleSignInButton;\r\n\r\n\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}